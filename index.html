<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–µ–Ω–µ–¥–∂–µ—Ä—Å–∫–∞—è –ë–∏—Ç–≤–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="/app.js"></script>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="main-menu" class="screen active">
        <div class="container">
            <!-- –õ–æ–≥–æ—Ç–∏–ø –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ -->
            <div class="logo-section">
                <div class="logo-icon">‚öîÔ∏è</div>
                <h1 class="game-title">
                    <span class="title-main">–ú–ï–ù–ï–î–ñ–ï–†–°–ö–ê–Ø</span>
                    <span class="title-sub">–ë–ò–¢–í–ê</span>
                </h1>
                <p class="game-subtitle">–°—Ç–∞–Ω—å –ª—É—á—à–∏–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º!</p>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é -->
            <div class="menu-buttons">
                <button class="btn btn-primary btn-large" onclick="quickStartGame()">
                    ‚ö° –ë—ã—Å—Ç—Ä–∞—è –∏–≥—Ä–∞
                </button>
                
                <button class="btn btn-secondary btn-large" onclick="showScreen('create-game')">
                    <span class="btn-icon">üë®‚Äçüè´</span>
                    <span>–°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É</span>
                </button>
                
                <button class="btn btn-secondary btn-large" onclick="showScreen('join-game')">
                    <span class="btn-icon">üéÆ</span>
                    <span>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</span>
                </button>
                
                <button class="btn btn-outline btn-large" onclick="showScreen('rules')">
                    <span class="btn-icon">üìñ</span>
                    <span>–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</span>
                </button>
                
                <button class="btn btn-outline btn-large" onclick="showScreen('history')">
                    <span class="btn-icon">üèÜ</span>
                    <span>–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä</span>
                </button>
            </div>

            <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
            <div class="decoration-dots"></div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä—ã (–¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è) -->
    <div id="create-game" class="screen">
        <div class="container">
            <div class="screen-header">
                <button class="btn-back" onclick="showScreen('main-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É</h2>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥</label>
                    <div class="number-selector">
                        <button class="btn-round" onclick="changeTeams(-1)">-</button>
                        <span id="team-count" class="number-display">4</span>
                        <button class="btn-round" onclick="changeTeams(1)">+</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>–ò–≥—Ä–æ–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥–µ</label>
                    <div class="number-selector">
                        <button class="btn-round" onclick="changePlayersPerTeam(-1)">-</button>
                        <span id="players-per-team" class="number-display">5</span>
                        <button class="btn-round" onclick="changePlayersPerTeam(1)">+</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>–í—Ä–µ–º—è –Ω–∞ –£—Ä–æ–≤–µ–Ω—å 1 (–º–∏–Ω—É—Ç—ã)</label>
                    <div class="number-selector">
                        <button class="btn-round" onclick="changeTime('level1', -1)">-</button>
                        <span id="time-level1" class="number-display">10</span>
                        <button class="btn-round" onclick="changeTime('level1', 1)">+</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>–í—Ä–µ–º—è –Ω–∞ –£—Ä–æ–≤–µ–Ω—å 2 (–º–∏–Ω—É—Ç—ã)</label>
                    <div class="number-selector">
                        <button class="btn-round" onclick="changeTime('level2', -1)">-</button>
                        <span id="time-level2" class="number-display">15</span>
                        <button class="btn-round" onclick="changeTime('level2', 1)">+</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>–í—Ä–µ–º—è –Ω–∞ –£—Ä–æ–≤–µ–Ω—å 3 (–º–∏–Ω—É—Ç—ã)</label>
                    <div class="number-selector">
                        <button class="btn-round" onclick="changeTime('level3', -1)">-</button>
                        <span id="time-level3" class="number-display">15</span>
                        <button class="btn-round" onclick="changeTime('level3', 1)">+</button>
                    </div>
                </div>

                <button class="btn btn-primary btn-large" onclick="createGame()">
                    üöÄ –°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É
                </button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å –∫–æ–¥–æ–º –∫–æ–º–Ω–∞—Ç—ã -->
    <div id="game-code" class="screen">
        <div class="container">
            <div class="code-card">
                <h2>–ò–≥—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞!</h2>
                <p class="code-label">–ö–æ–¥ –¥–ª—è –≤—Ö–æ–¥–∞:</p>
                <div class="game-code-display">
                    <span id="room-code">ABCD12</span>
                </div>
                <p class="code-hint">–£—á–∞—Å—Ç–Ω–∏–∫–∏ –º–æ–≥—É—Ç –≤–≤–µ—Å—Ç–∏ —ç—Ç–æ—Ç –∫–æ–¥ –¥–ª—è –≤—Ö–æ–¥–∞</p>
                
                <div class="waiting-status">
                    <p style="margin: 20px 0;">–£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</p>
                    <span id="players-count" class="players-counter">–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É</span>
                </div>

                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <button class="btn btn-primary btn-large" onclick="startGameAsTeacher()">
                        üë®‚Äçüè´ –ò–≥—Ä–∞—Ç—å –∫–∞–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
                    </button>
                    <button class="btn btn-secondary btn-large" onclick="startGameAsSinglePlayer()">
                        üéÆ –ë—ã—Å—Ç—Ä–∞—è –∏–≥—Ä–∞ (–æ–¥–∏–Ω –∏–≥—Ä–æ–∫)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ –≤ –∏–≥—Ä—É -->
    <div id="join-game" class="screen">
        <div class="container">
            <div class="screen-header">
                <button class="btn-back" onclick="showScreen('main-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                <h2>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ</h2>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–ö–æ–¥ –∏–≥—Ä—ã</label>
                    <input type="text" id="join-code" class="input-code" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥" maxlength="6">
                </div>

                <div class="form-group">
                    <label>–í–∞—à–µ –∏–º—è</label>
                    <input type="text" id="player-name" class="input-text" placeholder="–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?">
                </div>

                <button class="btn btn-primary btn-large" onclick="joinGame()">
                    üéÆ –í–æ–π—Ç–∏ –≤ –∏–≥—Ä—É
                </button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã -->
    <div id="team-selection" class="screen">
        <div class="container">
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É</h2>
            <div id="teams-list" class="teams-grid">
                <!-- –ö–æ–º–∞–Ω–¥—ã –¥–æ–±–∞–≤—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <button class="btn btn-success btn-large" onclick="showScreen('role-selection')">
                –î–∞–ª–µ–µ ‚Üí
            </button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏ -->
    <div id="role-selection" class="screen">
        <div class="container">
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</h2>
            <p class="subtitle">–í—Å–µ —Ä–æ–ª–∏ —Ä–∞–≤–Ω–æ–∑–Ω–∞—á–Ω—ã!</p>
            
            <div class="roles-grid">
                <div class="role-card" onclick="selectRole('ceo')">
                    <div class="role-icon">üëî</div>
                    <h3>CEO</h3>
                    <p>–ì–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä</p>
                </div>
                
                <div class="role-card" onclick="selectRole('cmo')">
                    <div class="role-icon">üì¢</div>
                    <h3>CMO</h3>
                    <p>–î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É</p>
                </div>
                
                <div class="role-card" onclick="selectRole('cto')">
                    <div class="role-icon">üíª</div>
                    <h3>CTO</h3>
                    <p>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–∏—Ä–µ–∫—Ç–æ—Ä</p>
                </div>
                
                <div class="role-card" onclick="selectRole('cfo')">
                    <div class="role-icon">üí∞</div>
                    <h3>CFO</h3>
                    <p>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä</p>
                </div>
                
                <div class="role-card" onclick="selectRole('coo')">
                    <div class="role-icon">‚öôÔ∏è</div>
                    <h3>COO</h3>
                    <p>–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –õ–æ–±–±–∏ (–æ–∂–∏–¥–∞–Ω–∏–µ) -->
    <div id="lobby" class="screen">
        <div class="container">
            <div class="team-info-card">
                <h2 id="team-name">–ö–æ–º–∞–Ω–¥–∞ –ê–ª—å—Ñ–∞</h2>
                <div class="team-score">
                    <span class="score-label">–ë–∞–ª–ª—ã:</span>
                    <span id="team-score" class="score-value">100</span>
                </div>
            </div>

            <div class="team-members">
                <h3>–°–æ—Å—Ç–∞–≤ –∫–æ–º–∞–Ω–¥—ã:</h3>
                <div id="members-list"></div>
            </div>

            <div class="waiting-game">
                <div class="spinner"></div>
                <p>–û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã...</p>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –£—Ä–æ–≤–µ–Ω—å 1: –ò–¥–µ—è -->
    <div id="level1" class="screen">
        <div class="container">
            <div class="level-header">
                <div class="level-badge">–£—Ä–æ–≤–µ–Ω—å 1</div>
                <h2>–ò–î–ï–Ø</h2>
                <div class="timer" id="timer1">10:00</div>
            </div>

            <div class="category-card">
                <p class="category-label">–í–∞—à–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –±–∏–∑–Ω–µ—Å–∞:</p>
                <h3 id="business-category" class="category-name">–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h3>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</label>
                    <input type="text" id="project-name" class="input-text" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ">
                </div>

                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ –∏–¥–µ–∏</label>
                    <textarea id="project-idea" class="textarea" rows="6" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –±–∏–∑–Ω–µ—Å-–∏–¥–µ—é..."></textarea>
                </div>

                <div class="form-group">
                    <label>–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è</label>
                    <input type="text" id="target-audience" class="input-text" placeholder="–ö—Ç–æ –≤–∞—à–∏ –∫–ª–∏–µ–Ω—Ç—ã?">
                </div>

                <div class="form-group">
                    <label>–ö–∞–∫ –±—É–¥–µ—Ç–µ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å?</label>
                    <textarea id="revenue-model" class="textarea" rows="3" placeholder="–ú–æ–¥–µ–ª—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏"></textarea>
                </div>

                <button class="btn btn-success btn-large" onclick="submitIdea()">
                    ‚úÖ –ì–æ—Ç–æ–≤—ã –∫ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
                </button>
            </div>

            <!-- –ß–∞—Ç –∫–æ–º–∞–Ω–¥—ã -->
            <div class="team-chat">
                <button class="chat-toggle" onclick="toggleChat()">üí¨ –ß–∞—Ç –∫–æ–º–∞–Ω–¥—ã</button>
                <div class="chat-window" id="chat-window" style="display: none;">
                    <div class="chat-messages" id="chat-messages"></div>
                    <div class="chat-input">
                        <input type="text" id="chat-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ...">
                        <button onclick="sendMessage()">‚Üí</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –£—Ä–æ–≤–µ–Ω—å 2: –ó–∞–ø—É—Å–∫ (–°–æ–±—ã—Ç–∏—è) -->
    <div id="level2" class="screen">
        <div class="container">
            <div class="level-header">
                <div class="level-badge level-badge-2">–£—Ä–æ–≤–µ–Ω—å 2</div>
                <h2>–ó–ê–ü–£–°–ö</h2>
                <div class="timer" id="timer2">15:00</div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="cards-progress"></div>
                <span class="progress-text">–ö–∞—Ä—Ç–æ—á–∫–∞ <span id="current-card">1</span> –∏–∑ 5</span>
            </div>

            <div id="event-card" class="event-card">
                <div class="event-header">
                    <span class="event-icon">‚ö†Ô∏è</span>
                    <h3 id="event-title">–°–æ–±—ã—Ç–∏–µ</h3>
                </div>
                <p id="event-description" class="event-text">–û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</p>
                
                <div class="choices" id="event-choices">
                    <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏–π –¥–æ–±–∞–≤—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>

            <div class="score-indicator">
                <span>–¢–µ–∫—É—â–∏–π —Å—á—ë—Ç:</span>
                <span id="current-score" class="score-value">100</span>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—Ä–æ—Å–∫–∞ –º–æ–Ω–µ—Ç–∫–∏ -->
    <div id="coin-modal" class="modal">
        <div class="modal-content coin-flip-modal">
            <h2>üé≤ –ë–†–û–°–û–ö –ú–û–ù–ï–¢–ö–ò</h2>
            <p class="coin-hint">–ú–æ–º–µ–Ω—Ç –∏—Å—Ç–∏–Ω—ã!</p>
            
            <div class="coin-container">
                <div id="coin" class="coin">
                    <div class="coin-side coin-heads">–û–†–Å–õ</div>
                    <div class="coin-side coin-tails">–†–ï–®–ö–ê</div>
                </div>
            </div>
            
            <div id="coin-result" class="coin-result"></div>
            <button class="btn btn-primary" onclick="closeCoinModal()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –£—Ä–æ–≤–µ–Ω—å 3: –ë–æ—Å—Å-—Ñ–∞–π—Ç -->
    <div id="level3" class="screen">
        <div class="container">
            <div class="level-header">
                <div class="level-badge level-badge-3">–£—Ä–æ–≤–µ–Ω—å 3</div>
                <h2>–ë–û–°–°-–§–ê–ô–¢</h2>
                <div class="timer" id="timer3">15:00</div>
            </div>

            <div class="boss-card">
                <div class="boss-header">
                    <span class="boss-icon">‚ö°</span>
                    <h3>–ò–î–ï–ê–õ–¨–ù–´–ô –®–¢–û–†–ú</h3>
                </div>
                <p class="boss-subtitle">–ù–∞ –≤–∞—à –±–∏–∑–Ω–µ—Å –æ–±—Ä—É—à–∏–ª–æ—Å—å 5 –∫—Ä–∏–∑–∏—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!</p>
                
                <div id="crisis-list" class="crisis-list">
                    <!-- –ö—Ä–∏–∑–∏—Å—ã –¥–æ–±–∞–≤—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>

            <div class="form-card">
                <h3>–ê–Ω—Ç–∏–∫—Ä–∏–∑–∏—Å–Ω—ã–π –ø–ª–∞–Ω</h3>
                
                <div class="form-group">
                    <label>1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (—á—Ç–æ —Ä–µ—à–∞–µ–º –ø–µ—Ä–≤—ã–º?)</label>
                    <textarea id="priorities" class="textarea" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label>2. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</label>
                    <textarea id="actions" class="textarea" rows="4"></textarea>
                </div>

                <div class="form-group">
                    <label>3. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π</label>
                    <textarea id="roles-distribution" class="textarea" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label>4. –°—Ä–æ–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏</label>
                    <textarea id="timeline" class="textarea" rows="2"></textarea>
                </div>

                <button class="btn btn-success btn-large" onclick="submitCrisisPlan()">
                    üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–ª–∞–Ω
                </button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
    <div id="results" class="screen">
        <div class="container">
            <div class="results-header">
                <h2>üèÜ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–ì–†–´</h2>
            </div>

            <div id="leaderboard" class="leaderboard">
                <!-- –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–æ–±–∞–≤–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>

            <div class="buttons-group">
                <button class="btn btn-primary" onclick="shareResults()">
                    üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                </button>
                <button class="btn btn-outline" onclick="showScreen('main-menu')">
                    üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
                </button>
            </div>
        </div>
    </div>

</body>
</html>
